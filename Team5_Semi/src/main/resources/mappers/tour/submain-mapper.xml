<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.multi.mvc.tour.model.mapper.SubmainMapper">
	
	<resultMap type="Submain" id="submainResultMap">
		<result property="contentid" column="contentid" />
		<result property="contenttypeid" column="contenttypeid" />
		<result property="homepage" column="homepage" />
		<result property="tel" column="tel" />
		<result property="title" column="title" />
		<result property="firstimage" column="firstimage" />
		<result property="firstimage2" column="firstimage2" />
		<result property="areacode" column="areacode" />
		<result property="sigungucode" column="sigungucode" />
		<result property="cat1" column="cat1" />
		<result property="cat2" column="cat2" />
		<result property="cat3" column="cat3" />
		<result property="addr1" column="addr1" />
		<result property="addr2" column="addr2" />
		<result property="zipcode" column="zipcode" />
		<result property="mapx" column="mapx" />
		<result property="mapy" column="mapy" />
		<result property="overview" column="overview" />
		<result property="accomcountlodging" column="accomcountlodging" />
		<result property="benikia" column="benikia" />
		<result property="checkintime" column="checkintime" />
		<result property="checkouttime" column="checkouttime" />
		<result property="chkcooking" column="chkcooking" />
		<result property="foodplace" column="foodplace" />
		<result property="goodstay" column="goodstay" />
		<result property="hanok" column="hanok" />
		<result property="infocenterlodging" column="infocenterlodging" />
		<result property="parkinglodging" column="parkinglodging" />
		<result property="pickup" column="pickup" />
		<result property="roomcount" column="roomcount" />
		<result property="reservationlodging" column="reservationlodging" />
		<result property="reservationurl" column="reservationurl" />
		<result property="roomtype" column="roomtype" />
		<result property="scalelodging" column="scalelodging" />
		<result property="subfacility" column="subfacility" />
		<result property="barbecue" column="barbecue" />
		<result property="beauty" column="beauty" />
		<result property="beverage" column="beverage" />
		<result property="bicycle" column="bicycle" />
		<result property="campfire" column="campfire" />
		<result property="fitness" column="fitness" />
		<result property="karaoke" column="karaoke" />
		<result property="publicbath" column="publicbath" />
		<result property="publicpc" column="publicpc" />
		<result property="sauna" column="sauna" />
		<result property="seminar" column="seminar" />
		<result property="sports" column="sports" />
		<result property="refundregulation" column="refundregulation" />
		<result property="chkcreditcardfood" column="chkcreditcardfood" />
		<result property="discountinfofood" column="discountinfofood" />
		<result property="firstmenu" column="firstmenu" />
		<result property="infocenterfood" column="infocenterfood" />
		<result property="kidsfacility" column="kidsfacility" />
		<result property="opendatefood" column="opendatefood" />
		<result property="opentimefood" column="opentimefood" />
		<result property="packing" column="packing" />
		<result property="parkingfood" column="parkingfood" />
		<result property="reservationfood" column="reservationfood" />
		<result property="restdatefood" column="restdatefood" />
		<result property="scalefood" column="scalefood" />
		<result property="seat" column="seat" />
		<result property="smoking" column="smoking" />
		<result property="treatmenu" column="treatmenu" />
		<result property="lcnsno" column="lcnsno" />
		<result property="accomcount" column="accomcount" />
		<result property="chkbabycarriage" column="chkbabycarriage" />
		<result property="chkcreditcard" column="chkcreditcard" />
		<result property="chkpet" column="chkpet" />
		<result property="expagerange" column="expagerange" />
		<result property="expguide" column="expguide" />
		<result property="heritage1" column="heritage1" />
		<result property="heritage2" column="heritage2" />
		<result property="heritage3" column="heritage3" />
		<result property="infocenter" column="infocenter" />
		<result property="opendate" column="opendate" />
		<result property="parking" column="parking" />
		<result property="restdate" column="restdate" />
		<result property="useseason" column="useseason" />
		<result property="usetime" column="usetime" />
	</resultMap>

	<select id="selectSubmainAll" resultType="Submain">
		SELECT * FROM accommodation
	</select>
	
	<!-- 숙소 갯수 -->
	<select id="selectSubmainCount" parameterType="map" resultType="int">
		SELECT
			COUNT(*)
		FROM accommodation as A
		WHERE 1 = 1
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		<if test="submainType != null">
			AND (
				<foreach collection="submainType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if>
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
	</select>
	
	<!-- 숙소 검색 -->
	<select id="selectAccmList" parameterType="map" resultMap="accmResultMap">
		SELECT 
			*
		FROM accommodation as A
		WHERE 1 = 1
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
		<if test="hotelType != null">
			AND (
				<foreach collection="hotelType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if>
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		ORDER BY A.contentid DESC LIMIT ${limit} OFFSET ${offset}
	</select>
	
	<!-- 숙소 contentId로 찾아오기 -->
	<select id="findByContentId" parameterType="int" resultMap="accmResultMap">
		SELECT
			*
		FROM accommodation
		WHERE CONTENTID = #{contentid}
	</select>
	
	<insert id="insertBooking" parameterType="Booking">
		INSERT INTO booking(
			bkNo, mNO, contentId, startDate, endDate, headCount
		) VALUES (
			default, #{mNO}, #{contentId}, #{startDate}, #{endDate}, #{headCount}
		)
	</insert>
	
	
	<select id="selectRestaurantAll" resultType="Restaurant">
		SELECT * FROM restaurant
	</select>
	
	<!-- 숙소 갯수 -->
	<select id="selectRestaurantCount" parameterType="map" resultType="int">
		SELECT
			COUNT(*)
		FROM restaurant as A
		WHERE 1 = 1
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		<if test="restaurantType != null">
			AND (
				<foreach collection="restaurantType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if>
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
	</select>
	
	<!-- 숙소 검색 -->
	<select id="selectRestaurantList" parameterType="map" resultMap="restaurantResultMap">
		SELECT 
			*
		FROM restaurant as A
		WHERE 1 = 1
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
		<if test="hotelType != null">
			AND (
				<foreach collection="restaurantType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if>
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		ORDER BY A.contentid DESC LIMIT ${limit} OFFSET ${offset}
	</select>
	
	<!-- 숙소 contentId로 찾아오기 -->
	<select id="findByContentId" parameterType="int" resultMap="restaurantResultMap">
		SELECT
			*
		FROM restaurant
		WHERE CONTENTID = #{contentid}
	</select>
	
	
	<select id="selectTourspotAll" resultType="Tourspot">
		SELECT * FROM tourspot
	</select>
	
	<!-- 숙소 갯수 -->
	<select id="selectTourspotCount" parameterType="map" resultType="int">
		SELECT
			COUNT(*)
		FROM tourspot as A
		WHERE 1 = 1
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		<if test="tourspotType != null">
			AND (
				<foreach collection="tourspotType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if> <!-- 관광지 타입은 없어서 안쓰셔도 될거같아요요 -->
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
	</select>
	
	<!-- 숙소 검색 -->
	<select id="selectTourspotList" parameterType="map" resultMap="tourspotResultMap">
		SELECT 
			*
		FROM tourspot as A
		WHERE 1 = 1
		<if test="searchValue != null">
			AND A.TITLE LIKE '%${searchValue}%'
		</if>
		<if test="tourspotType != null">
			AND (
				<foreach collection="tourspotType" item="item" separator="or">
					A.cat3 LIKE '%${item}%'
				</foreach>
			)
		</if><!-- 관광지 타입은 없어서 안쓰셔도 될거같아요요 -->
		<if test="selectAreaCode != null and selectAreaCode != ''">
			AND A.AREACODE LIKE ${selectAreaCode}
		</if>
		ORDER BY A.contentid DESC LIMIT ${limit} OFFSET ${offset}
	</select>
	
	<!-- 숙소 contentId로 찾아오기 -->
	<select id="findByContentId" parameterType="int" resultMap="tourspotResultMap">
		SELECT
			*
		FROM tourspot
		WHERE CONTENTID = #{contentid}
	</select>

</mapper>
